# Что это?

#### *минипроект для первого курса*

Данный репозиторий содержит простого бота для скачиваний видео с ютуба при отправке ему ссылки в личные сообщения\
Этот проект больше технический и сделан с использованием продвинутых технологий, таких как **Telethon**, **Docker**, **Redis**

Для запуска бота вам нужно 
1) Создать бота и полечить токен через @BotFather
2) Получить [апи ключи телеграма](https://my.telegram.org/apps)
3) создать и настроить .env и .env-redis файлы, их примеры есть в репозитории(.env.example и .env.example)


### ENV

| Настройка                        | За что отвечает                                                                        |
|----------------------------------|----------------------------------------------------------------------------------------|
| bot_token                        | Токен бота                                                                             |
| api_id                           | айди апи ключа телеграм клиента                                                        |
| api_hash                         | контрольная хэш сумма телеграм клиента                                                 |
| parallel_download_count_limit    | количество видео, которые бот может одновременно скачивать                             |
| parallel_upload_count_limit      | количество видео, которые бот может одновременно выгружать на сервера телеграма        |  
| parallel_upload_thumbnails_limit | количество превью видео, которые бот может одновременно выгружать на сервера телеграма |
| max_filesize                     | максимальный размер видео в байтах(не больше 2 ГБ, то есть 2147483648)                 |
| video_cache_ttl                  | время кэширования видео в секундах                                                     |


### ENV-REDIS
| Настройка  | За что отвечает                                   |
|------------|---------------------------------------------------|
| redis-host | Эндпоинт редиса(по умолчанию "redis")             |
| redis-port | Порт для подключения к редису(по умолчанию 6379)  |



# Запуск проекта

Для запуска проекта вам нужно установить [Docker](https://docs.docker.com/engine/)\
Проект можно запустить на любой ОС поддерживающей Docker, достаточно прописать в терминал

### Первый запуск или запуск после обновления проекта
```shell
docker-compose up --build
```

### Запуск уже собранного проекта
```shell
docker-compose up
```


# Стек технологий

| Технология                                       | Для чего используется                               |
|--------------------------------------------------|-----------------------------------------------------|
| [Python](https://www.python.org)                 | Язык программирования на котором написан проект     |
| [Docker](https://docs.docker.com)                | Удобный запуск проекта в виртуальных машинах        |
| [Redis](https://redis.io)                        | NoSQL база данных для кэширования                   |
| [telethon](https://docs.telethon.dev/en/stable/) | Продвинутая библиотека для работы с телеграм ботами |
| [Pydantic](https://docs.pydantic.dev)            | Парс и валидация конфигов                           |
| [YT-dlp](https://github.com/yt-dlp/yt-dlp)       | Скачивание видео                                    |
| [redis-py](https://github.com/redis/redis-py)    | Библиотека для работы с Redis в питоне              |
